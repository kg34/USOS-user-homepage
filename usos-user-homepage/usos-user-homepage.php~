<?php
/*
 * Plugin Name: USOS user homepage
 * Version: 1.0
 * Author: kg346915
 */


/**
 * Check for Wordpress Social Login
 */
function uuh_activate(){

	//Require parent plugin
	if ( ! is_plugin_active( 'wordpress-social-login/wp-social-login.php' ) and current_user_can( 'activate_plugins' ) ) 
	{
		// Stop activation redirect and show error
		wp_die('Sorry, but this plugin requires the Wordpress Social Login to be installed and active. <br><a href="' . admin_url( 'plugins.php' ) . '">&laquo; Return to Plugins</a>');
	}
}

/**
 * Attempt to install UUH upon activation
 * Create uhs tables
 */

register_activation_hook( __FILE__, 'uuh_activate' );

function uuh_install()
{
	uuh_database_install();
}

register_activation_hook( __FILE__, 'uuh_install' );

function uuh_uninstall()
{
	uuh_database_uninstall();
}

register_deactivation_hook( __FILE__, 'uuh_uninstall' );

defined( 'USOS_USER_HOMEPAGE_ABS_PATH' )
	|| define( 'USOS_USER_HOMEPAGE_ABS_PATH', WP_PLUGIN_DIR . '/usos-user-homepage' );
require_once( USOS_USER_HOMEPAGE_ABS_PATH . '/includes/settings/uuh.database.php' ); // Install/Uninstall UUH database tables

function rmlc_plugin_menu() {
	    add_menu_page('Logo Carousel', 'Logo Carousel', 'administrator', 'rmlc_settings', 'rmlc_display_settings');
	        add_submenu_page('rmlc_settings', __('Images'), __('Images'), 'edit_themes', 'rmlc_images', 'rmlc_images');
}
add_action('admin_menu', 'rmlc_plugin_menu');

require_once( USOS_USER_HOMEPAGE_ABS_PATH . '/menu.php' );	
function uuh_add_menu_page() {
	add_menu_page('USOS user homepage', 'USOS user homepage', 'read', 'uuh_settings', 'uuh_menu_page_callback');
};

add_action('admin_menu', 'uuh_add_menu_page');

require_once( USOS_USER_HOMEPAGE_ABS_PATH . '/menu.php' );	
function uuh_add_page() {
	add_comments_page('homepage', 'homepage', 'read', 'uuh_settings', 'uuh_menu_page_callback');
};

add_action('admin_menu', 'uuh_add_page');
?>
